/*! jquery.valiant360 - v0.4.3 - 2016-10-11
 * http://flimshaw.github.io/Valiant360
 * Copyright (c) 2016 Charlie Hoey <me@charliehoey.com>; Licensed MIT */

/**
 * @author alteredq / http://alteredqualia.com/
 * @author mr.doob / http://mrdoob.com/
 */



var Detector = {

        canvas: !! window.CanvasRenderingContext2D,
        webgl: ( function () { try { var canvas = document.createElement( 'canvas' ); return !! window.WebGLRenderingContext && ( canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' ) ); } catch( e ) { return false; } } )(),
        workers: !! window.Worker,
        fileapi: window.File && window.FileReader && window.FileList && window.Blob,

        getWebGLErrorMessage: function () {

                var element = document.createElement( 'div' );
                element.id = 'webgl-error-message';
                element.style.fontFamily = 'monospace';
                element.style.fontSize = '13px';
                element.style.fontWeight = 'normal';
                element.style.textAlign = 'center';
                element.style.background = '#fff';
                element.style.color = '#000';
                element.style.padding = '1.5em';
                element.style.width = '400px';
                element.style.margin = '5em auto 0';

                if ( ! this.webgl ) {

                        element.innerHTML = window.WebGLRenderingContext ? [
                                'Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />',
                                'Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'
                        ].join( '\n' ) : [
                                'Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>',
                                'Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'
                        ].join( '\n' );

                }

                return element;

        },

        addGetWebGLMessage: function ( parameters ) {

                var parent, id, element;

                parameters = parameters || {};

                parent = parameters.parent !== undefined ? parameters.parent : document.body;
                id = parameters.id !== undefined ? parameters.id : 'oldie';

                element = Detector.getWebGLErrorMessage();
                element.id = id;

                parent.appendChild( element );

        }

};
/*!
 * Valiant360 panorama video player/photo viewer jquery plugin
 *
 * Copyright (c) 2014 Charlie Hoey <@flimshaw>
 *
 * Released under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Jquery plugin pattern based on https://github.com/jquery-boilerplate/jquery-patterns/blob/master/patterns/jquery.basic.plugin-boilerplate.js
 */

/* REQUIREMENTS:

jQuery 1.7.2 or greater
three.js r65 or higher

*/

globalViewQua=

  [[   7.719,  -835,   -39,   21, -548],
  [   7.730,  -835,   -39,   21, -548],
  [   7.740,  -835,   -39,   21, -547],
  [   7.749,  -835,   -39,   21, -547],
  [   7.759,  -835,   -39,   21, -548],
  [   7.770,  -835,   -39,   20, -548],
  [   7.779,  -835,   -40,   20, -548],
  [   7.789,  -835,   -40,   20, -548],
  [   7.799,  -835,   -39,   20, -547],
  [   7.810,  -835,   -39,   20, -547],
  [   7.820,  -835,   -39,   20, -547],
  [   7.830,  -835,   -39,   20, -547],
  [   7.839,  -835,   -39,   20, -547],
  [   7.849,  -835,   -39,   20, -547],
  [   7.860,  -835,   -39,   20, -547],
  [   7.869,  -835,   -39,   20, -547],
  [   7.879,  -835,   -39,   20, -547],
  [   7.889,  -835,   -39,   20, -547],
  [   7.900,  -835,   -39,   20, -547],
  [   7.910,  -835,   -39,   20, -547],
  [   7.919,  -835,   -39,   20, -546],
  [   7.929,  -836,   -39,   20, -546],
  [   7.940,  -836,   -39,   20, -546],
  [   7.950,  -836,   -39,   20, -546],
  [   7.959,  -836,   -39,   20, -546],
  [   7.969,  -836,   -39,   19, -546],
  [   7.980,  -835,   -39,   19, -547],
  [   7.990,  -835,   -39,   19, -547],
  [   7.999,  -835,   -39,   19, -547],
  [   8.009,  -835,   -39,   19, -547],
  [   8.019,  -835,   -39,   19, -547],
  [   8.030,  -835,   -39,   19, -547],
  [   8.040,  -835,   -39,   19, -547],
  [   8.050,  -835,   -39,   19, -547],
  [   8.059,  -835,   -39,   19, -547],
  [   8.070,  -835,   -39,   19, -547],
  [   8.080,  -835,   -39,   20, -547],
  [   8.089,  -835,   -39,   20, -547],
  [   8.099,  -835,   -39,   20, -547],
  [   8.110,  -835,   -40,   20, -547],
  [   8.120,  -835,   -40,   20, -547],
  [   8.129,  -835,   -40,   20, -547],
  [   8.139,  -835,   -40,   20, -547],
  [   8.150,  -835,   -40,   20, -547],
  [   8.160,  -835,   -40,   20, -547],
  [   8.170,  -835,   -40,   20, -547],
  [   8.179,  -835,   -41,   20, -547],
  [   8.189,  -835,   -41,   20, -547],
  [   8.200,  -835,   -41,   20, -547],
  [   8.210,  -835,   -41,   20, -547],
  [   8.219,  -835,   -40,   20, -547],
  [   8.229,  -835,   -40,   20, -547],
  [   8.240,  -835,   -40,   20, -547],
  [   8.250,  -835,   -40,   20, -547],
  [   8.259,  -835,   -40,   20, -547],
  [   8.269,  -835,   -40,   20, -547],
  [   8.280,  -835,   -40,   20, -547],
  [   8.290,  -835,   -40,   20, -547],
  [   8.300,  -835,   -40,   19, -547],
  [   8.309,  -835,   -40,   19, -547],
  [   8.320,  -835,   -40,   20, -547],
  [   8.330,  -835,   -40,   20, -547],
  [   8.339,  -835,   -40,   20, -547],
  [   8.349,  -835,   -40,   20, -547],
  [   8.359,  -835,   -40,   20, -547],
  [   8.370,  -835,   -40,   20, -547],
  [   8.380,  -835,   -40,   20, -547],
  [   8.390,  -835,   -40,   20, -547],
  [   8.399,  -835,   -40,   20, -547],
  [   8.410,  -835,   -40,   20, -547],
  [   8.420,  -835,   -40,   20, -547],
  [   8.429,  -835,   -40,   20, -547],
  [   8.439,  -835,   -40,   20, -547],
  [   8.450,  -835,   -40,   20, -547],
  [   8.460,  -835,   -40,   20, -547],
  [   8.470,  -835,   -40,   20, -547],
  [   8.479,  -835,   -40,   20, -547],
  [   8.489,  -835,   -40,   20, -547],
  [   8.500,  -835,   -40,   20, -547],
  [   8.510,  -835,   -40,   20, -547],
  [   8.519,  -835,   -40,   20, -547],
  [   8.529,  -835,   -40,   20, -547],
  [   8.540,  -835,   -40,   20, -547],
  [   8.550,  -835,   -40,   20, -547],
  [   8.559,  -835,   -40,   20, -547],
  [   8.569,  -835,   -40,   20, -547],
  [   8.580,  -835,   -40,   21, -547],
  [   8.590,  -835,   -40,   21, -547],
  [   8.600,  -835,   -40,   21, -547],
  [   8.610,  -835,   -40,   21, -547],
  [   8.620,  -835,   -40,   21, -547],
  [   8.630,  -835,   -40,   21, -547],
  [   8.639,  -835,   -40,   21, -547],
  [   8.649,  -835,   -40,   21, -547],
  [   8.659,  -835,   -40,   21, -547],
  [   8.670,  -835,   -40,   21, -547],
  [   8.680,  -835,   -40,   21, -547],
  [   8.690,  -835,   -40,   20, -547],
  [   8.699,  -835,   -40,   20, -547],
  [   8.710,  -835,   -40,   20, -547],
  [   8.720,  -835,   -40,   21, -547],
  [   8.730,  -835,   -40,   21, -547],
  [   8.739,  -835,   -40,   21, -547],
  [   8.750,  -835,   -40,   20, -547],
  [   8.760,  -835,   -40,   20, -547],
  [   8.770,  -835,   -40,   20, -547],
  [   8.779,  -835,   -40,   20, -547],
  [   8.790,  -835,   -40,   20, -547],
  [   8.800,  -835,   -40,   20, -547],
  [   8.810,  -835,   -40,   20, -547],
  [   8.820,  -835,   -40,   20, -547],
  [   8.829,  -835,   -40,   20, -547],
  [   8.840,  -835,   -40,   20, -547],
  [   8.850,  -835,   -40,   20, -547],
  [   8.859,  -835,   -40,   20, -547],
  [   8.869,  -835,   -40,   20, -547],
  [   8.880,  -835,   -40,   20, -548],
  [   8.890,  -835,   -40,   20, -548],
  [   8.900,  -835,   -40,   20, -548],
  [   8.910,  -835,   -40,   20, -548],
  [   8.920,  -835,   -40,   20, -548],
  [   8.930,  -835,   -40,   20, -548],
  [   8.940,  -835,   -40,   20, -548],
  [   8.949,  -835,   -40,   20, -548],
  [   8.960,  -834,   -41,   20, -548],
  [   8.970,  -834,   -41,   20, -548],
  [   8.980,  -834,   -41,   20, -548],
  [   8.990,  -834,   -41,   20, -548],
  [   8.999,  -834,   -41,   20, -548],
  [   9.010,  -834,   -41,   20, -549],
  [   9.020,  -834,   -41,   20, -549],
  [   9.030,  -834,   -41,   20, -549],
  [   9.039,  -834,   -41,   20, -549],
  [   9.050,  -834,   -41,   20, -549],
  [   9.060,  -834,   -41,   20, -549],
  [   9.070,  -834,   -41,   20, -549],
  [   9.079,  -834,   -41,   20, -549],
  [   9.090,  -834,   -41,   20, -549],
  [   9.100,  -834,   -41,   20, -549],
  [   9.110,  -834,   -41,   20, -549],
  [   9.120,  -834,   -41,   20, -549],
  [   9.129,  -833,   -41,   20, -549],
  [   9.140,  -833,   -41,   20, -549],
  [   9.150,  -833,   -41,   20, -549],
  [   9.160,  -833,   -41,   20, -549],
  [   9.169,  -833,   -41,   20, -550],
  [   9.180,  -833,   -41,   20, -550],
  [   9.190,  -833,   -41,   20, -550],
  [   9.200,  -833,   -41,   20, -550],
  [   9.209,  -833,   -41,   20, -550],
  [   9.220,  -833,   -41,   20, -550],
  [   9.230,  -833,   -41,   20, -550],
  [   9.240,  -833,   -41,   20, -550],
  [   9.250,  -833,   -41,   20, -550],
  [   9.261,  -833,   -41,   20, -550],
  [   9.270,  -833,   -41,   19, -550],
  [   9.280,  -833,   -41,   19, -550],
  [   9.289,  -833,   -41,   20, -550],
  [   9.299,  -833,   -41,   19, -550],
  [   9.310,  -833,   -41,   19, -551],
  [   9.320,  -833,   -41,   19, -551],
  [   9.330,  -833,   -41,   19, -551],
  [   9.340,  -832,   -41,   19, -551],
  [   9.350,  -832,   -41,   19, -551],
  [   9.360,  -832,   -41,   19, -551],
  [   9.370,  -832,   -41,   19, -551],
  [   9.380,  -832,   -41,   19, -552],
  [   9.390,  -832,   -41,   19, -552],
  [   9.400,  -832,   -41,   19, -552],
  [   9.410,  -832,   -41,   19, -552],
  [   9.420,  -832,   -41,   19, -552],
  [   9.430,  -831,   -41,   18, -552],
  [   9.440,  -831,   -42,   18, -553],
  [   9.450,  -831,   -42,   18, -553],
  [   9.460,  -831,   -42,   17, -553],
  [   9.470,  -831,   -42,   17, -554],
  [   9.480,  -830,   -43,   17, -554],
  [   9.490,  -830,   -43,   17, -554],
  [   9.500,  -830,   -43,   16, -555],
  [   9.509,  -830,   -43,   16, -555],
  [   9.520,  -830,   -43,   16, -555],
  [   9.530,  -830,   -43,   16, -555],
  [   9.540,  -830,   -43,   16, -555],
  [   9.550,  -830,   -44,   16, -555],
  [   9.561,  -830,   -44,   16, -555],
  [   9.570,  -830,   -44,   16, -555],
  [   9.580,  -830,   -44,   16, -555],
  [   9.590,  -830,   -44,   16, -555],
  [   9.600,  -829,   -44,   16, -555],
  [   9.610,  -829,   -44,   16, -555],
  [   9.620,  -829,   -44,   16, -555],
  [   9.630,  -829,   -43,   16, -555],
  [   9.640,  -829,   -43,   16, -556],
  [   9.650,  -829,   -43,   15, -556],
  [   9.660,  -829,   -43,   15, -556],
  [   9.670,  -829,   -43,   15, -556],
  [   9.680,  -829,   -44,   15, -556],
  [   9.690,  -829,   -44,   15, -556],
  [   9.700,  -829,   -43,   15, -556],
  [   9.710,  -829,   -43,   15, -556],
  [   9.720,  -829,   -43,   16, -556],
  [   9.730,  -829,   -43,   16, -556],
  [   9.740,  -829,   -43,   15, -556],
  [   9.750,  -829,   -43,   15, -556],
  [   9.760,  -829,   -43,   15, -557],
  [   9.771,  -829,   -43,   15, -557],
  [   9.780,  -829,   -43,   15, -556],
  [   9.790,  -829,   -43,   16, -556],
  [   9.800,  -829,   -43,   16, -556],
  [   9.809,  -829,   -43,   16, -557],
  [   9.820,  -829,   -43,   16, -557],
  [   9.830,  -829,   -43,   16, -557],
  [   9.840,  -829,   -43,   16, -557],
  [   9.850,  -829,   -43,   16, -557],
  [   9.861,  -829,   -43,   16, -557],
  [   9.870,  -829,   -42,   16, -557],
  [   9.880,  -829,   -42,   16, -557],
  [   9.890,  -829,   -42,   16, -557],
  [   9.900,  -829,   -42,   16, -557],
  [   9.910,  -829,   -42,   16, -557],
  [   9.920,  -829,   -42,   16, -557],
  [   9.930,  -829,   -42,   16, -557],
  [   9.940,  -829,   -42,   16, -557],
  [   9.950,  -829,   -42,   16, -557],
  [   9.960,  -829,   -42,   15, -557],
  [   9.970,  -829,   -42,   15, -557],
  [   9.980,  -828,   -42,   15, -557],
  [   9.990,  -828,   -42,   14, -557],
  [  10.000,  -828,   -42,   14, -557],
  [  10.010,  -828,   -42,   14, -557],
  [  10.020,  -828,   -42,   14, -557],
  [  10.030,  -828,   -42,   14, -557],
  [  10.040,  -828,   -43,   14, -557],
  [  10.050,  -828,   -43,   14, -557],
  [  10.060,  -828,   -43,   14, -558],
  [  10.071,  -828,   -44,   15, -558],
  [  10.081,  -828,   -44,   15, -558],
  [  10.090,  -827,   -44,   15, -558],
  [  10.100,  -827,   -45,   16, -559],
  [  10.110,  -827,   -45,   16, -559],
  [  10.120,  -827,   -46,   16, -559],
  [  10.130,  -826,   -46,   16, -560],
  [  10.140,  -826,   -47,   16, -560],
  [  10.150,  -826,   -47,   16, -561],
  [  10.161,  -825,   -47,   16, -561],
  [  10.171,  -825,   -48,   16, -562],
  [  10.180,  -825,   -48,   16, -562],
  [  10.190,  -825,   -48,   16, -562],
  [  10.201,  -825,   -48,   16, -562],
  [  10.210,  -825,   -48,   16, -562],
  [  10.220,  -825,   -47,   16, -562],
  [  10.230,  -824,   -47,   17, -563],
  [  10.241,  -824,   -46,   17, -563],
  [  10.251,  -824,   -46,   17, -563],
  [  10.260,  -824,   -45,   18, -563],
  [  10.270,  -824,   -45,   18, -563],
  [  10.280,  -824,   -45,   18, -563],
  [  10.291,  -824,   -44,   18, -563],
  [  10.300,  -824,   -44,   18, -563],
  [  10.310,  -824,   -44,   19, -563],
  [  10.320,  -825,   -43,   19, -563],
  [  10.331,  -825,   -43,   19, -562],
  [  10.340,  -825,   -42,   19, -562],
  [  10.350,  -825,   -41,   20, -562],
  [  10.360,  -825,   -41,   20, -562],
  [  10.371,  -825,   -40,   20, -563],
  [  10.381,  -824,   -40,   19, -563],
  [  10.390,  -824,   -40,   18, -564],
  [  10.400,  -823,   -40,   17, -565],
  [  10.411,  -822,   -39,   16, -566],
  [  10.420,  -822,   -39,   15, -567],
  [  10.430,  -821,   -39,   14, -568],
  [  10.440,  -821,   -38,   13, -569],
  [  10.450,  -820,   -38,   12, -569],
  [  10.461,  -820,   -38,   12, -570],
  [  10.471,  -820,   -37,   11, -570],
  [  10.480,  -820,   -37,   11, -570],
  [  10.490,  -820,   -37,   11, -570],
  [  10.501,  -820,   -36,   11, -570],
  [  10.510,  -820,   -36,   11, -570],
  [  10.520,  -820,   -36,   11, -569],
  [  10.530,  -820,   -36,   11, -569],
  [  10.541,  -820,   -36,   11, -569],
  [  10.551,  -820,   -35,   10, -570],
  [  10.560,  -820,   -35,   10, -570],
  [  10.570,  -820,   -35,    9, -570],
  [  10.580,  -820,   -35,    8, -570],
  [  10.591,  -820,   -35,    6, -570],
  [  10.600,  -820,   -34,    5, -570],
  [  10.610,  -820,   -34,    4, -570],
  [  10.620,  -820,   -33,    3, -570],
  [  10.630,  -820,   -33,    2, -570],
  [  10.640,  -821,   -32,    2, -569],
  [  10.650,  -821,   -32,    1, -569],
  [  10.660,  -821,   -31,    0, -569],
  [  10.671,  -821,   -31,    0, -569],
  [  10.681,  -821,   -30,    0, -569],
  [  10.690,  -821,   -30,   -1, -569],
  [  10.700,  -821,   -30,   -1, -569],
  [  10.711,  -821,   -30,   -1, -569],
  [  10.721,  -820,   -29,   -1, -570],
  [  10.730,  -820,   -29,   -1, -570],
  [  10.740,  -820,   -30,    0, -571],
  [  10.750,  -819,   -30,    0, -571],
  [  10.761,  -819,   -30,    0, -571],
  [  10.770,  -819,   -31,    1, -571],
  [  10.780,  -820,   -31,    1, -571],
  [  10.790,  -820,   -31,    1, -570],
  [  10.801,  -820,   -32,    1, -571],
  [  10.811,  -820,   -32,    0, -570],
  [  10.820,  -820,   -32,   -2, -570],
  [  10.830,  -821,   -33,   -4, -569],
  [  10.841,  -821,   -32,   -6, -569],
  [  10.850,  -821,   -31,   -7, -568],
  [  10.860,  -822,   -30,   -7, -568],
  [  10.870,  -822,   -29,   -7, -568],
  [  10.881,  -822,   -28,   -6, -567],
  [  10.891,  -823,   -28,   -5, -566],
  [  10.901,  -824,   -28,   -4, -565],
  [  10.910,  -825,   -28,   -3, -564],
  [  10.920,  -825,   -28,   -2, -563],
  [  10.931,  -825,   -28,   -2, -563],
  [  10.940,  -825,   -28,   -1, -563],
  [  10.950,  -825,   -28,   -1, -563],
  [  10.960,  -825,   -28,   -2, -563],
  [  10.971,  -825,   -29,   -2, -564],
  [  10.981,  -825,   -30,   -3, -564],
  [  10.990,  -824,   -31,   -4, -564],
  [  11.000,  -824,   -32,   -4, -565],
  [  11.011,  -824,   -32,   -5, -564],
  [  11.021,  -825,   -32,   -7, -564],
  [  11.030,  -825,   -31,   -8, -563],
  [  11.040,  -825,   -31,   -9, -563],
  [  11.051,  -825,   -31,  -10, -562],
  [  11.061,  -826,   -30,  -10, -562],
  [  11.070,  -826,   -30,  -11, -562],
  [  11.080,  -826,   -30,  -11, -562],
  [  11.090,  -826,   -30,  -12, -562],
  [  11.101,  -827,   -29,  -13, -561],
  [  11.111,  -827,   -28,  -13, -560],
  [  11.120,  -828,   -27,  -12, -559],
  [  11.130,  -828,   -26,  -12, -558],
  [  11.141,  -829,   -25,  -12, -558],
  [  11.151,  -829,   -24,  -12, -557],
  [  11.160,  -829,   -23,  -13, -557],
  [  11.170,  -829,   -23,  -14, -557],
  [  11.181,  -829,   -22,  -16, -557],
  [  11.191,  -829,   -21,  -17, -558],
  [  11.201,  -828,   -20,  -18, -559],
  [  11.210,  -828,   -18,  -19, -559],
  [  11.220,  -828,   -16,  -19, -559],
  [  11.231,  -828,   -14,  -19, -559],
  [  11.241,  -828,   -10,  -20, -559],
  [  11.250,  -827,    -8,  -20, -560],
  [  11.260,  -826,    -7,  -22, -562],
  [  11.271,  -824,    -6,  -24, -565],
  [  11.280,  -822,    -6,  -26, -568],
  [  11.290,  -819,    -6,  -29, -572],
  [  11.300,  -816,    -7,  -32, -575],
  [  11.311,  -814,    -8,  -33, -579],
  [  11.321,  -812,    -9,  -35, -582],
  [  11.331,  -810,   -10,  -36, -584],
  [  11.340,  -809,   -11,  -36, -585],
  [  11.351,  -809,   -12,  -36, -586],
  [  11.361,  -808,   -13,  -36, -587],
  [  11.370,  -808,   -14,  -36, -587],
  [  11.380,  -808,   -14,  -36, -587],
  [  11.390,  -808,   -15,  -35, -586],
  [  11.401,  -809,   -16,  -34, -586],
  [  11.411,  -809,   -18,  -33, -585],
  [  11.421,  -809,   -20,  -31, -585],
  [  11.430,  -809,   -21,  -29, -585],
  [  11.441,  -809,   -23,  -27, -585],
  [  11.451,  -809,   -24,  -27, -585],
  [  11.460,  -809,   -25,  -27, -585],
  [  11.470,  -809,   -26,  -29, -585],
  [  11.481,  -809,   -25,  -32, -585],
  [  11.491,  -809,   -24,  -36, -586],
  [  11.501,  -808,   -21,  -41, -586],
  [  11.510,  -808,   -17,  -47, -586],
  [  11.521,  -808,   -14,  -54, -586],
  [  11.531,  -807,   -10,  -63, -585],
  [  11.541,  -807,    -6,  -73, -585],
  [  11.551,  -806,    -3,  -83, -585],
  [  11.560,  -805,     1,  -94, -585],
  [  11.571,  -804,     6, -106, -584],
  [  11.581,  -803,    11, -117, -583],
  [  11.590,  -802,    18, -129, -581],
  [  11.600,  -802,    25, -140, -579],
  [  11.611,  -802,    30, -152, -576],
  [  11.621,  -802,    35, -162, -573],
  [  11.631,  -802,    40, -171, -570],
  [  11.641,  -801,    44, -178, -568],
  [  11.651,  -801,    48, -183, -566],
  [  11.661,  -801,    52, -187, -565],
  [  11.670,  -801,    54, -191, -564],
  [  11.680,  -800,    57, -195, -563],
  [  11.691,  -799,    59, -200, -563],
  [  11.701,  -798,    60, -204, -563],
  [  11.711,  -796,    61, -209, -563],
  [  11.721,  -795,    63, -213, -563],
  [  11.730,  -794,    65, -217, -563],
  [  11.741,  -793,    67, -221, -563],
  [  11.751,  -792,    70, -225, -562],
  [  11.760,  -791,    73, -229, -561],
  [  11.770,  -790,    76, -233, -560],
  [  11.781,  -790,    80, -235, -560],
  [  11.791,  -789,    83, -237, -559],
  [  11.801,  -789,    85, -238, -558],
  [  11.811,  -789,    87, -238, -558],
  [  11.821,  -790,    87, -238, -558],
  [  11.831,  -790,    87, -236, -558],
  [  11.841,  -790,    87, -235, -558],
  [  11.850,  -791,    86, -232, -559],
  [  11.860,  -791,    84, -229, -559],
  [  11.871,  -793,    80, -224, -560],
  [  11.881,  -795,    75, -216, -561],
  [  11.891,  -797,    70, -206, -561],
  [  11.900,  -800,    63, -195, -562],
  [  11.911,  -803,    54, -183, -564],
  [  11.921,  -805,    44, -169, -566],
  [  11.930,  -807,    35, -156, -567],
  [  11.940,  -808,    26, -144, -569],
  [  11.951,  -810,    16, -132, -570],
  [  11.961,  -811,     7, -120, -571],
  [  11.971,  -812,     0, -109, -572],
  [  11.981,  -813,    -8,  -97, -573],
  [  11.991,  -813,   -16,  -84, -574],
  [  12.001,  -814,   -25,  -70, -575],
  [  12.011,  -815,   -32,  -56, -575],
  [  12.021,  -815,   -38,  -42, -575],
  [  12.030,  -816,   -43,  -30, -574],
  [  12.041,  -817,   -47,  -18, -573],
  [  12.051,  -818,   -52,   -7, -572],
  [  12.060,  -818,   -57,    3, -572],
  [  12.070,  -818,   -62,   13, -571],
  [  12.081,  -817,   -69,   22, -571],
  [  12.091,  -816,   -75,   32, -571],
  [  12.101,  -815,   -80,   41, -571],
  [  12.111,  -814,   -85,   50, -571],
  [  12.121,  -813,   -90,   60, -571],
  [  12.131,  -811,   -96,   69, -571],
  [  12.141,  -810,  -101,   78, -571],
  [  12.150,  -809,  -105,   85, -571],
  [  12.161,  -808,  -108,   90, -571],
  [  12.171,  -807,  -109,   93, -572],
  [  12.181,  -807,  -109,   94, -571],
  [  12.191,  -807,  -108,   93, -572],
  [  12.201,  -807,  -107,   92, -572],
  [  12.211,  -807,  -106,   90, -573],
  [  12.221,  -807,  -105,   88, -574],
  [  12.230,  -807,  -102,   85, -575],
  [  12.240,  -807,  -100,   81, -575],
  [  12.251,  -807,   -97,   77, -576],
  [  12.261,  -807,   -94,   72, -577],
  [  12.271,  -807,   -90,   66, -578],
  [  12.281,  -808,   -85,   58, -579],
  [  12.291,  -808,   -79,   49, -580],
  [  12.301,  -809,   -73,   38, -581],
  [  12.311,  -809,   -66,   26, -582],
  [  12.321,  -809,   -58,   13, -583],
  [  12.331,  -809,   -49,   -1, -585],
  [  12.341,  -808,   -39,  -17, -587],
  [  12.351,  -807,   -28,  -36, -588],
  [  12.361,  -805,   -13,  -59, -589],
  [  12.371,  -803,     0,  -81, -590],
  [  12.381,  -800,    13, -102, -590],
  [  12.391,  -797,    27, -121, -590],
  [  12.401,  -794,    39, -139, -589],
  [  12.411,  -791,    49, -155, -589],
  [  12.421,  -788,    57, -168, -588],
  [  12.431,  -786,    64, -176, -588],
  [  12.441,  -785,    69, -182, -587],
  [  12.451,  -784,    73, -185, -587],
  [  12.461,  -784,    77, -186, -586],
  [  12.471,  -784,    80, -186, -586],
  [  12.481,  -784,    84, -187, -585],
  [  12.491,  -783,    88, -189, -585],
  [  12.502,  -782,    94, -191, -584],
  [  12.511,  -781,   101, -195, -583],
  [  12.521,  -780,   107, -200, -582],
  [  12.531,  -778,   115, -208, -580],
  [  12.540,  -776,   123, -216, -578],
  [  12.551,  -774,   131, -225, -576],
  [  12.561,  -773,   138, -231, -573],
  [  12.571,  -772,   144, -236, -571],
  [  12.581,  -772,   148, -238, -569],
  [  12.591,  -772,   150, -238, -569],
  [  12.601,  -772,   150, -237, -569],
  [  12.611,  -773,   149, -235, -569],
  [  12.621,  -774,   147, -232, -569],
  [  12.632,  -775,   144, -229, -570],
  [  12.641,  -777,   139, -224, -571],
  [  12.651,  -778,   133, -218, -572],
  [  12.661,  -780,   126, -209, -574],
  [  12.670,  -783,   116, -199, -577],
  [  12.681,  -785,   106, -188, -580],
  [  12.691,  -787,    95, -175, -582],
  [  12.701,  -790,    84, -159, -585],
  [  12.711,  -793,    72, -140, -587],
  [  12.721,  -797,    57, -117, -588],
  [  12.731,  -800,    43,  -95, -590],
  [  12.741,  -802,    30,  -76, -591],
  [  12.751,  -804,    19,  -57, -591],
  [  12.761,  -805,     9,  -41, -591],
  [  12.771,  -806,     0,  -28, -591],
  [  12.781,  -806,    -7,  -17, -590],
  [  12.791,  -806,   -14,   -7, -590],
  [  12.802,  -806,   -20,    2, -590],
  [  12.811,  -806,   -26,   10, -590],
  [  12.821,  -806,   -32,   19, -590],
  [  12.831,  -805,   -38,   27, -590],
  [  12.840,  -805,   -45,   37, -590],
  [  12.851,  -804,   -53,   48, -589],
  [  12.861,  -802,   -65,   62, -589],
  [  12.871,  -801,   -80,   79, -588],
  [  12.881,  -798,   -97,   97, -586],
  [  12.892,  -795,  -114,  115, -584],
  [  12.901,  -792,  -128,  131, -581],
  [  12.911,  -789,  -139,  145, -579],
  [  12.921,  -787,  -147,  155, -577],
  [  12.931,  -785,  -153,  162, -577],
  [  12.941,  -784,  -155,  165, -577],
  [  12.951,  -783,  -154,  165, -578],
  [  12.961,  -783,  -153,  163, -580],
  [  12.972,  -782,  -151,  160, -582],
  [  12.981,  -782,  -148,  156, -584],
  [  12.991,  -781,  -146,  152, -587],
  [  13.001,  -781,  -142,  147, -589],
  [  13.010,  -780,  -137,  142, -592],
  [  13.021,  -781,  -132,  135, -595],
  [  13.031,  -781,  -127,  127, -597],
  [  13.041,  -782,  -120,  117, -599],
  [  13.051,  -783,  -113,  106, -601],
  [  13.062,  -783,  -105,   95, -604],
  [  13.071,  -784,   -96,   81, -607],
  [  13.081,  -785,   -86,   67, -609],
  [  13.091,  -786,   -75,   49, -611],
  [  13.101,  -787,   -64,   32, -612],
  [  13.111,  -787,   -53,   15, -613],
  [  13.121,  -788,   -42,   -1, -613],
  [  13.131,  -788,   -31,  -17, -614],
  [  13.142,  -788,   -19,  -34, -614],
  [  13.152,  -787,    -6,  -51, -614],
  [  13.161,  -786,     7,  -67, -613],
  [  13.171,  -785,    22,  -82, -613],
  [  13.181,  -783,    37,  -97, -612],
  [  13.191,  -781,    53, -111, -611],
  [  13.201,  -779,    67, -126, -609],
  [  13.211,  -777,    79, -139, -608],
  [  13.221,  -775,    89, -150, -606],
  [  13.232,  -773,    96, -158, -605],
  [  13.241,  -772,   100, -163, -604],
  [  13.251,  -772,   103, -164, -604],
  [  13.261,  -772,   103, -164, -604],
  [  13.272,  -772,   103, -162, -604],
  [  13.281,  -773,   102, -161, -604],
  [  13.291,  -773,   101, -159, -604],
  [  13.301,  -773,   101, -158, -604],
  [  13.312,  -774,    99, -156, -605],
  [  13.322,  -774,    98, -154, -605],
  [  13.331,  -775,    96, -151, -605],
  [  13.341,  -776,    93, -147, -604],
  [  13.351,  -778,    90, -142, -604],
  [  13.361,  -780,    86, -136, -604],
  [  13.371,  -781,    81, -129, -604],
  [  13.381,  -783,    75, -122, -605],
  [  13.391,  -784,    68, -115, -606],
  [  13.402,  -785,    61, -106, -607],
  [  13.412,  -785,    53,  -96, -608],
  [  13.421,  -786,    44,  -84, -609],
  [  13.431,  -788,    33,  -69, -610],
  [  13.442,  -789,    23,  -54, -611],
  [  13.451,  -789,    12,  -39, -612],
  [  13.461,  -789,     1,  -22, -612],
  [  13.471,  -790,    -8,   -6, -612],
  [  13.481,  -791,   -16,    9, -611],
  [  13.491,  -791,   -21,   23, -609],
  [  13.501,  -792,   -25,   33, -608],
  [  13.511,  -793,   -28,   40, -606],
  [  13.521,  -793,   -30,   42, -605],
  [  13.532,  -794,   -31,   43, -605],
  [  13.541,  -794,   -31,   42, -605],
  [  13.551,  -794,   -31,   41, -605],
  [  13.561,  -794,   -31,   38, -605],
  [  13.572,  -794,   -31,   34, -606],
  [  13.581,  -794,   -32,   29, -606],
  [  13.591,  -794,   -32,   23, -606],
  [  13.601,  -793,   -32,   17, -607],
  [  13.612,  -794,   -31,   10, -606],
  [  13.622,  -794,   -30,    3, -606],
  [  13.631,  -794,   -29,   -3, -606],
  [  13.641,  -794,   -28,   -9, -606],
  [  13.651,  -795,   -27,  -14, -605],
  [  13.662,  -795,   -26,  -18, -605],
  [  13.671,  -795,   -25,  -21, -604],
  [  13.681,  -796,   -25,  -22, -603],
  [  13.691,  -797,   -24,  -23, -602],
  [  13.702,  -798,   -24,  -23, -601],
  [  13.712,  -799,   -23,  -23, -599],
  [  13.721,  -801,   -22,  -23, -597],
  [  13.731,  -803,   -21,  -23, -594],
  [  13.742,  -806,   -20,  -22, -590],
  [  13.752,  -810,   -19,  -22, -585],
  [  13.761,  -815,   -18,  -22, -578],
  [  13.771,  -821,   -17,  -21, -569],
  [  13.782,  -828,   -16,  -21, -559],
  [  13.792,  -835,   -14,  -19, -549],
  [  13.801,  -842,   -13,  -18, -538],
  [  13.811,  -850,   -12,  -15, -526],
  [  13.821,  -858,   -10,  -13, -513],
  [  13.832,  -865,    -9,  -12, -500],
  [  13.842,  -873,    -7,  -10, -486],
  [  13.851,  -881,    -6,   -7, -472],
  [  13.861,  -889,    -4,   -4, -457],
  [  13.872,  -896,    -1,   -1, -442],
  [  13.881,  -904,     0,    0, -427],
  [  13.891,  -910,     2,    1, -413],
  [  13.901,  -916,     3,    1, -400],
  [  13.912,  -921,     4,    1, -389],
  [  13.921,  -924,     3,    0, -380],
  [  13.931,  -927,     3,    0, -374],
  [  13.941,  -928,     2,    0, -370],
  [  13.952,  -929,     0,    0, -369],
  [  13.962,  -929,    -1,   -1, -369],
  [  13.972,  -928,    -3,   -2, -370],
  [  13.981,  -927,    -4,   -3, -373],
  [  13.991,  -926,    -6,   -4, -376],
  [  14.002,  -925,    -7,   -5, -379],
  [  14.012,  -923,    -8,   -5, -384],
  [  14.021,  -921,    -9,   -5, -389],
  [  14.031,  -918,   -10,   -5, -395],
  [  14.042,  -914,   -12,   -5, -403],
  [  14.052,  -909,   -14,   -4, -414],
  [  14.061,  -902,   -17,   -3, -430],
  [  14.071,  -892,   -20,   -2, -449],
  [  14.082,  -880,   -25,   -1, -473],
  [  14.091,  -865,   -29,   -1, -499],
  [  14.101,  -848,   -34,    0, -528],
  [  14.111,  -830,   -40,    0, -556],
  [  14.121,  -813,   -44,   -1, -579],
  [  14.132,  -798,   -47,   -3, -599],
  [  14.142,  -785,   -50,   -4, -617],
  [  14.151,  -771,   -53,   -5, -633],
  [  14.161,  -758,   -56,   -6, -648],
  [  14.172,  -745,   -59,   -7, -663],
  [  14.182,  -734,   -61,   -7, -676],
  [  14.191,  -723,   -62,   -8, -687],
  [  14.201,  -714,   -62,  -10, -696],
  [  14.212,  -707,   -63,  -11, -703],
  [  14.222,  -701,   -63,  -13, -709],
  [  14.231,  -695,   -63,  -14, -715],
  [  14.241,  -691,   -63,  -16, -719],
  [  14.252,  -686,   -64,  -18, -723],
  [  14.262,  -682,   -65,  -20, -728],
  [  14.272,  -678,   -66,  -21, -731],
  [  14.281,  -674,   -66,  -23, -734],
  [  14.291,  -671,   -67,  -25, -737],
  [  14.302,  -669,   -66,  -27, -739],
  [  14.312,  -668,   -66,  -29, -740],
  [  14.321,  -668,   -65,  -31, -740],
  [  14.331,  -669,   -65,  -33, -739],
  [  14.342,  -671,   -64,  -35, -737],
  [  14.352,  -675,   -63,  -36, -734],
  [  14.362,  -679,   -61,  -38, -729],
  [  14.371,  -685,   -58,  -39, -724],
  [  14.382,  -693,   -55,  -40, -717],
  [  14.392,  -703,   -51,  -41, -707],
  [  14.401,  -715,   -46,  -42, -695],
  [  14.411,  -729,   -41,  -42, -681],
  [  14.422,  -744,   -36,  -42, -665],
  [  14.432,  -760,   -30,  -40, -647],
  [  14.442,  -776,   -24,  -38, -628],
  [  14.452,  -791,   -20,  -37, -609],
  [  14.461,  -806,   -17,  -36, -589],
  [  14.472,  -820,   -16,  -35, -570],
  [  14.482,  -833,   -16,  -33, -551],
  [  14.491,  -843,   -18,  -29, -535],
  [  14.501,  -853,   -21,  -26, -519],
  [  14.512,  -862,   -23,  -22, -504],
  [  14.522,  -870,   -25,  -19, -490],
  [  14.532,  -877,   -28,  -15, -478],
  [  14.541,  -883,   -30,  -12, -466],
  [  14.552,  -889,   -31,   -8, -456],
  [  14.562,  -893,   -31,   -5, -447],
  [  14.572,  -897,   -32,   -4, -439],
  [  14.581,  -900,   -33,   -2, -432],
  [  14.592,  -903,   -34,   -2, -426],
  [  14.602,  -906,   -35,    0, -421],
  [  14.611,  -908,   -35,    0, -416],
  [  14.621,  -910,   -36,    2, -412],
  [  14.631,  -911,   -37,    3, -409],
  [  14.642,  -912,   -38,    5, -407],
  [  14.652,  -913,   -39,    6, -405],
  [  14.662,  -913,   -39,    7, -405],
  [  14.671,  -912,   -39,    8, -406],
  [  14.682,  -911,   -38,    9, -408],
  [  14.692,  -910,   -38,    9, -411],
  [  14.702,  -908,   -38,    9, -415],
  [  14.711,  -906,   -38,    8, -419],
  [  14.722,  -903,   -38,    7, -425],
  [  14.732,  -900,   -39,    7, -433],
  [  14.742,  -895,   -40,    5, -444],
  [  14.751,  -887,   -42,    4, -458],
  [  14.761,  -876,   -45,    3, -478],
  [  14.772,  -862,   -49,    3, -504],
  [  14.782,  -843,   -53,    3, -533],
  [  14.792,  -822,   -59,    3, -566],
  [  14.801,  -799,   -63,    3, -597],
  [  14.812,  -779,   -67,    2, -623],
  [  14.822,  -762,   -68,    1, -643],
  [  14.831,  -746,   -70,    0, -661],
  [  14.841,  -732,   -72,    0, -676],
  [  14.852,  -720,   -75,    0, -689],
  [  14.862,  -709,   -77,    0, -700],
  [  14.872,  -700,   -78,    0, -709],
  [  14.882,  -692,   -78,    0, -717],
  [  14.892,  -686,   -78,   -1, -723],
  [  14.902,  -680,   -79,   -2, -728],
  [  14.912,  -675,   -80,   -4, -732],
  [  14.921,  -671,   -81,   -7, -736],
  [  14.931,  -667,   -81,   -9, -740],
  [  14.942,  -664,   -82,  -10, -742],
  [  14.952,  -662,   -83,  -12, -744],
  [  14.962,  -661,   -84,  -13, -745],
  [  14.971,  -661,   -84,  -15, -745],
  [  14.982,  -661,   -84,  -17, -745],
  [  14.992,  -661,   -84,  -18, -744],
  [  15.002,  -663,   -84,  -19, -743],
  [  15.011,  -665,   -83,  -20, -741],
  [  15.022,  -668,   -82,  -21, -738],
  [  15.032,  -673,   -80,  -22, -734],
  [  15.042,  -679,   -78,  -23, -728],
  [  15.051,  -688,   -74,  -23, -721],
  [  15.062,  -698,   -70,  -25, -712],
  [  15.072,  -710,   -65,  -26, -700],
  [  15.082,  -724,   -60,  -29, -685],
  [  15.092,  -742,   -54,  -31, -666],
  [  15.101,  -761,   -48,  -33, -645],
  [  15.112,  -778,   -45,  -34, -625],
  [  15.122,  -793,   -43,  -34, -606],
  [  15.131,  -806,   -43,  -32, -588],
  [  15.141,  -818,   -44,  -31, -571],
  [  15.152,  -829,   -45,  -29, -555],
  [  15.162,  -839,   -46,  -28, -540],
  [  15.172,  -848,   -47,  -26, -525],
  [  15.182,  -856,   -48,  -24, -513],
  [  15.192,  -863,   -49,  -23, -501],
  [  15.202,  -869,   -50,  -23, -491],
  [  15.212,  -873,   -51,  -21, -482],
  [  15.221,  -877,   -52,  -20, -475],
  [  15.232,  -880,   -53,  -18, -469],
  [  15.242,  -883,   -53,  -16, -464],
  [  15.252,  -885,   -54,  -15, -460],
  [  15.262,  -887,   -55,  -14, -457],
  [  15.272,  -888,   -57,  -14, -454],
  [  15.282,  -890,   -58,  -14, -452],
  [  15.292,  -890,   -59,  -13, -450],
  [  15.302,  -891,   -59,  -13, -448],
  [  15.311,  -892,   -59,  -13, -447],
  [  15.322,  -892,   -60,  -13, -447],
  [  15.332,  -892,   -60,  -13, -447],
  [  15.342,  -891,   -61,  -13, -448],
  [  15.352,  -890,   -61,  -14, -449],
  [  15.362,  -889,   -60,  -14, -452],
  [  15.372,  -888,   -59,  -13, -454],
  [  15.382,  -887,   -58,  -12, -457],
  [  15.392,  -885,   -56,  -11, -461],
  [  15.401,  -882,   -54,   -9, -466],
  [  15.412,  -879,   -51,   -8, -473],
  [  15.422,  -874,   -49,   -6, -482],
  [  15.431,  -868,   -48,   -5, -493],
  [  15.441,  -861,   -47,   -5, -505],
  [  15.452,  -852,   -46,   -4, -521],
  [  15.462,  -841,   -47,   -4, -538],
  [  15.472,  -827,   -49,   -4, -558],
  [  15.482,  -812,   -51,   -4, -580],
  [  15.492,  -796,   -54,   -4, -602],
  [  15.502,  -780,   -56,   -4, -622],
  [  15.512,  -765,   -56,   -5, -640],
  [  15.522,  -752,   -56,   -5, -656],
  [  15.532,  -741,   -56,   -6, -668],
  [  15.542,  -734,   -55,   -7, -676],
  [  15.552,  -728,   -52,   -8, -682],
  [  15.562,  -725,   -50,  -10, -686],
  [  15.571,  -723,   -48,  -11, -688],
  [  15.582,  -722,   -47,  -14, -689],
  [  15.592,  -723,   -46,  -15, -688],
  [  15.602,  -725,   -45,  -17, -686],
  [  15.612,  -728,   -44,  -18, -682],
  [  15.622,  -733,   -44,  -19, -677],
  [  15.632,  -739,   -43,  -20, -671],
  [  15.642,  -745,   -42,  -22, -665],
  [  15.652,  -750,   -41,  -23, -658],
  [  15.662,  -755,   -41,  -25, -653],
  [  15.672,  -759,   -40,  -26, -648],
  [  15.682,  -762,   -40,  -26, -645],
  [  15.692,  -764,   -40,  -26, -642],
  [  15.703,  -767,   -40,  -25, -639],
  [  15.712,  -769,   -39,  -25, -637],
  [  15.722,  -770,   -39,  -24, -635],
  [  15.732,  -771,   -39,  -23, -634],
  [  15.741,  -773,   -39,  -23, -632],
  [  15.752,  -774,   -39,  -22, -631],
  [  15.762,  -775,   -39,  -22, -630],
  [  15.772,  -775,   -40,  -21, -629],
  [  15.782,  -776,   -41,  -21, -628],
  [  15.793,  -777,   -42,  -21, -627],
  [  15.802,  -777,   -43,  -21, -627],
  [  15.812,  -777,   -45,  -22, -626],
  [  15.822,  -777,   -47,  -23, -626],
  [  15.832,  -777,   -50,  -24, -626],
  [  15.842,  -776,   -55,  -27, -627],
  [  15.852,  -776,   -63,  -31, -626],
  [  15.862,  -775,   -73,  -38, -625],
  [  15.873,  -774,   -87,  -48, -625],
  [  15.882,  -772,  -101,  -60, -624],
  [  15.892,  -769,  -116,  -72, -623],
  [  15.902,  -766,  -130,  -84, -622],
  [  15.912,  -762,  -145,  -95, -622],
  [  15.922,  -758,  -159, -105, -622],
  [  15.932,  -754,  -173, -116, -621],
  [  15.942,  -750,  -186, -125, -621],
  [  15.952,  -746,  -198, -133, -620],
  [  15.962,  -742,  -209, -140, -620],
  [  15.972,  -738,  -220, -148, -619],
  [  15.982,  -734,  -230, -154, -618],
  [  15.992,  -732,  -239, -160, -617],
  [  16.002,  -730,  -246, -166, -615],
  [  16.012,  -729,  -252, -170, -613],
  [  16.022,  -728,  -256, -174, -610],
  [  16.032,  -727,  -260, -178, -609],
  [  16.043,  -727,  -262, -181, -607],
  [  16.052,  -726,  -264, -182, -607],
  [  16.062,  -726,  -266, -183, -606],
  [  16.072,  -726,  -266, -183, -606],
  [  16.082,  -726,  -266, -183, -605],
  [  16.092,  -727,  -265, -181, -606],
  [  16.102,  -728,  -263, -179, -606],
  [  16.112,  -730,  -261, -176, -606],
  [  16.122,  -732,  -257, -173, -606],
  [  16.133,  -734,  -252, -167, -606],
  [  16.142,  -738,  -245, -161, -607],
  [  16.152,  -741,  -237, -152, -608],
  [  16.162,  -745,  -228, -143, -610],
  [  16.172,  -748,  -217, -132, -611],
  [  16.182,  -752,  -206, -120, -613],
  [  16.192,  -756,  -193, -108, -615],
  [  16.202,  -760,  -179,  -94, -616],
  [  16.212,  -764,  -164,  -81, -617],
  [  16.223,  -767,  -150,  -68, -618],
  [  16.232,  -771,  -134,  -55, -619],
  [  16.242,  -776,  -116,  -41, -618],
  [  16.252,  -780,   -98,  -27, -617],
  [  16.262,  -784,   -80,  -13, -614],
  [  16.272,  -788,   -63,   -1, -611],
  [  16.282,  -793,   -47,   10, -607],
  [  16.292,  -796,   -32,   21, -603],
  [  16.303,  -799,   -18,   31, -599],
  [  16.313,  -801,    -6,   40, -596],
  [  16.322,  -803,     5,   48, -593],
  [  16.332,  -804,    15,   56, -590],
  [  16.343,  -805,    25,   63, -588],
  [  16.352,  -806,    32,   70, -586],
  [  16.362,  -806,    38,   77, -584],
  [  16.372,  -807,    43,   82, -582],
  [  16.382,  -807,    46,   87, -581],
  [  16.393,  -807,    48,   91, -580],
  [  16.402,  -807,    49,   93, -580],
  [  16.412,  -807,    49,   94, -580],
  [  16.422,  -806,    49,   95, -580],
  [  16.433,  -806,    48,   96, -581],
  [  16.442,  -805,    48,   97, -582],
  [  16.452,  -804,    47,   98, -583],
  [  16.462,  -803,    46,   98, -584],
  [  16.472,  -803,    45,   98, -585],
  [  16.482,  -802,    43,   97, -587],
  [  16.492,  -801,    40,   94, -589],
  [  16.502,  -800,    35,   90, -591],
  [  16.513,  -800,    29,   85, -592],
  [  16.523,  -800,    20,   78, -594],
  [  16.532,  -799,     9,   69, -596],
  [  16.542,  -799,    -4,   58, -598],
  [  16.552,  -798,   -21,   45, -599],
  [  16.562,  -796,   -40,   29, -601],
  [  16.572,  -794,   -60,   12, -604],
  [  16.582,  -791,   -79,   -4, -605],
  [  16.592,  -788,   -98,  -22, -607],
  [  16.603,  -784,  -116,  -39, -607],
  [  16.613,  -780,  -134,  -54, -608],
  [  16.622,  -775,  -152,  -69, -608],
  [  16.632,  -770,  -168,  -82, -609],
  [  16.643,  -765,  -184,  -95, -608],
  [  16.652,  -762,  -197, -106, -607],
  [  16.662,  -758,  -209, -116, -605],
  [  16.672,  -756,  -220, -126, -602],
  [  16.683,  -754,  -230, -134, -599],
  [  16.693,  -753,  -238, -142, -596],
  [  16.703,  -751,  -245, -149, -593],
  [  16.712,  -749,  -251, -156, -591],
  [  16.722,  -747,  -257, -163, -589],
  [  16.732,  -745,  -263, -169, -588],
  [  16.742,  -744,  -268, -174, -586],
  [  16.752,  -742,  -272, -179, -585],
  [  16.762,  -740,  -275, -182, -584],
  [  16.773,  -739,  -277, -185, -584],
  [  16.783,  -739,  -278, -187, -584],
  [  16.792,  -739,  -278, -188, -583],
  [  16.802,  -739,  -277, -187, -583],
  [  16.813,  -741,  -274, -186, -583],
  [  16.823,  -743,  -270, -183, -583],
  [  16.832,  -745,  -264, -178, -585],
  [  16.842,  -748,  -256, -171, -587],
  [  16.852,  -751,  -246, -163, -589],
  [  16.863,  -755,  -234, -152, -592],
  [  16.872,  -759,  -221, -140, -595],
  [  16.882,  -763,  -205, -126, -599],
  [  16.892,  -768,  -188, -110, -602],
  [  16.903,  -772,  -170,  -94, -604],
  [  16.913,  -777,  -151,  -78, -605],
  [  16.922,  -782,  -133,  -61, -605],
  [  16.932,  -786,  -115,  -45, -605],
  [  16.943,  -789,   -98,  -31, -604],
  [  16.952,  -793,   -80,  -16, -603],
  [  16.962,  -796,   -62,   -2, -601],
  [  16.972,  -799,   -43,   12, -598],
  [  16.983,  -801,   -25,   26, -596],
  [  16.993,  -803,    -8,   39, -593],
  [  17.002,  -804,     5,   50, -591],
  [  17.012,  -805,    17,   59, -589],
  [  17.022,  -806,    27,   68, -587],
  [  17.033,  -806,    36,   76, -585],
  [  17.042,  -806,    44,   83, -583],
  [  17.052,  -806,    50,   89, -582],
  [  17.062,  -806,    55,   93, -581],
  [  17.073,  -806,    58,   96, -580],
  [  17.082,  -805,    60,   99, -580],
  [  17.092,  -805,    63,  101, -580],
  [  17.102,  -805,    65,  103, -580],
  [  17.113,  -804,    67,  105, -580],
  [  17.123,  -804,    68,  106, -580],
  [  17.132,  -804,    69,  108, -580],
  [  17.142,  -803,    70,  109, -580],
  [  17.153,  -803,    70,  109, -580],
  [  17.163,  -803,    70,  110, -581],
  [  17.172,  -802,    69,  110, -582],
  [  17.182,  -801,    68,  109, -583],
  [  17.192,  -801,    65,  106, -584],
  [  17.203,  -801,    61,  104, -586],
  [  17.213,  -800,    57,  101, -587],
  [  17.222,  -800,    51,   97, -589],
  [  17.232,  -799,    44,   93, -591],
  [  17.243,  -798,    35,   87, -594],
  [  17.253,  -798,    23,   80, -596],
  [  17.262,  -797,     8,   69, -599],
  [  17.272,  -796,    -9,   55, -601],
  [  17.283,  -795,   -30,   37, -604],
  [  17.293,  -792,   -53,   17, -607],
  [  17.303,  -789,   -76,   -3, -608],
  [  17.312,  -785,   -99,  -23, -610],
  [  17.323,  -781,  -120,  -42, -611],
  [  17.333,  -777,  -139,  -58, -611],
  [  17.343,  -773,  -155,  -72, -610],
  [  17.352,  -769,  -169,  -85, -609],
  [  17.362,  -765,  -183,  -96, -608],
  [  17.373,  -762,  -196, -107, -607],
  [  17.383,  -758,  -209, -118, -605],
  [  17.392,  -755,  -220, -129, -603],
  [  17.402,  -751,  -231, -139, -601],
  [  17.413,  -748,  -240, -149, -599],
  [  17.423,  -745,  -248, -158, -598],
  [  17.432,  -742,  -255, -165, -596],
  [  17.442,  -739,  -262, -172, -595],
  [  17.453,  -736,  -267, -178, -595],
  [  17.463,  -734,  -272, -182, -594],
  [  17.473,  -732,  -276, -187, -593],
  [  17.482,  -730,  -281, -192, -592],
  [  17.492,  -728,  -284, -196, -591],
  [  17.503,  -727,  -287, -199, -589],
  [  17.512,  -727,  -289, -201, -589],
  [  17.522,  -726,  -290, -202, -588],
  [  17.532,  -727,  -289, -202, -588],
  [  17.543,  -728,  -286, -199, -589],
  [  17.553,  -731,  -280, -195, -590],
  [  17.562,  -734,  -273, -188, -592],
  [  17.572,  -738,  -263, -178, -594],
  [  17.583,  -743,  -252, -166, -597],
  [  17.593,  -748,  -238, -152, -599],
  [  17.603,  -753,  -223, -136, -602],
  [  17.612,  -759,  -207, -119, -605],
  [  17.623,  -765,  -188, -101, -607],
  [  17.633,  -770,  -168,  -82, -608],
  [  17.643,  -776,  -146,  -62, -609],
  [  17.652,  -781,  -125,  -43, -609],
  [  17.662,  -786,  -104,  -27, -608],
  [  17.673,  -790,   -85,  -12, -606],
  [  17.683,  -792,   -70,    0, -605],
  [  17.693,  -795,   -58,    9, -603],
  [  17.702,  -796,   -49,   16, -602],
  [  17.713,  -797,   -43,   20, -601],
  [  17.723,  -797,   -40,   22, -601],
  [  17.733,  -797,   -40,   23, -601],
  [  17.742,  -797,   -41,   23, -601],
  [  17.753,  -797,   -42,   22, -601],
  [  17.763,  -797,   -43,   22, -601],
  [  17.773,  -797,   -44,   21, -601],
  [  17.782,  -797,   -44,   21, -601],
  [  17.793,  -797,   -44,   22, -601],
  [  17.803,  -796,   -43,   22, -602],
  [  17.813,  -796,   -42,   23, -602],
  [  17.823,  -796,   -40,   24, -602],
  [  17.832,  -796,   -40,   24, -602],
  [  17.843,  -796,   -40,   23, -603],
  [  17.853,  -796,   -41,   22, -603],
  [  17.862,  -795,   -42,   22, -603],
  [  17.872,  -795,   -43,   21, -603],
  [  17.883,  -795,   -45,   20, -604],
  [  17.893,  -795,   -46,   19, -604],
  [  17.903,  -795,   -48,   17, -604],
  [  17.913,  -795,   -49,   15, -604],
  [  17.923,  -795,   -50,   13, -604],
  [  17.933,  -795,   -51,   11, -604],
  [  17.943,  -795,   -52,    8, -604],
  [  17.952,  -795,   -52,    5, -604],
  [  17.963,  -795,   -53,    5, -603],
  [  17.973,  -796,   -52,    5, -602],
  [  17.983,  -796,   -52,    5, -602],
  [  17.992,  -796,   -53,    4, -602],
  [  18.002,  -796,   -53,    4, -602],
  [  18.013,  -796,   -53,    4, -601],
  [  18.023,  -797,   -53,    4, -601],
  [  18.033,  -797,   -53,    4, -600],
  [  18.043,  -798,   -53,    4, -600],
  [  18.053,  -798,   -53,    4, -599],
  [  18.063,  -798,   -53,    3, -599],
  [  18.073,  -798,   -54,    2, -599],
  [  18.082,  -799,   -54,    2, -598],
  [  18.093,  -799,   -54,    1, -598],
  [  18.103,  -800,   -54,    0, -597],
  [  18.113,  -800,   -54,    0, -597],
  [  18.122,  -800,   -54,    0, -596],
  [  18.132,  -800,   -54,    0, -596],
  [  18.143,  -801,   -54,    0, -596],
  [  18.153,  -801,   -54,    0, -595],
  [  18.163,  -801,   -54,    0, -595],
  [  18.172,  -802,   -55,    0, -594],
  [  18.183,  -802,   -55,    0, -594],
  [  18.193,  -802,   -55,    0, -594],
  [  18.203,  -802,   -55,   -1, -594],
  [  18.213,  -802,   -54,   -1, -594],
  [  18.223,  -802,   -54,   -1, -594],
  [  18.233,  -802,   -54,   -1, -594],
  [  18.243,  -802,   -53,   -1, -594],
  [  18.252,  -801,   -53,    0, -595],
  [  18.263,  -801,   -53,    0, -595],
  [  18.273,  -801,   -53,    0, -595],
  [  18.283,  -802,   -53,    0, -594],
  [  18.293,  -802,   -54,    0, -594],
  [  18.302,  -802,   -54,    0, -594],
  [  18.313,  -802,   -54,    0, -594],
  [  18.323,  -802,   -54,    0, -594],
  [  18.333,  -802,   -53,    0, -594],
  [  18.343,  -802,   -53,    0, -594],
  [  18.353,  -801,   -54,    0, -595],
  [  18.363,  -801,   -54,    0, -595],
  [  18.373,  -800,   -54,    0, -596],
  [  18.382,  -800,   -54,    0, -597],
  [  18.393,  -800,   -54,   -1, -597],
  [  18.403,  -800,   -54,   -2, -597],
  [  18.413,  -800,   -54,   -3, -597],
  [  18.423,  -800,   -55,   -4, -597],
  [  18.433,  -800,   -55,   -5, -597],
  [  18.443,  -800,   -55,   -5, -596],
  [  18.453,  -800,   -54,   -6, -596],
  [  18.463,  -800,   -54,   -6, -596],
  [  18.472,  -800,   -54,   -6, -596],
  [  18.483,  -800,   -54,   -6, -596],
  [  18.493,  -800,   -54,   -6, -596],
  [  18.503,  -800,   -54,   -7, -596],
  [  18.512,  -800,   -54,   -7, -596],
  [  18.523,  -800,   -54,   -7, -596],
  [  18.533,  -800,   -54,   -7, -596],
  [  18.543,  -801,   -54,   -8, -596],
  [  18.553,  -801,   -53,   -8, -595],
  [  18.563,  -801,   -52,   -9, -595],
  [  18.573,  -801,   -52,  -11, -595],
  [  18.583,  -801,   -52,  -13, -595],
  [  18.592,  -801,   -51,  -14, -596],
  [  18.603,  -801,   -50,  -15, -596],
  [  18.613,  -800,   -50,  -16, -596],
  [  18.623,  -800,   -50,  -16, -596],
  [  18.633,  -800,   -50,  -16, -596],
  [  18.643,  -801,   -49,  -16, -596],
  [  18.653,  -801,   -49,  -16, -596],
  [  18.663,  -801,   -49,  -17, -596],
  [  18.673,  -801,   -49,  -16, -596],
  [  18.682,  -801,   -49,  -16, -595],
  [  18.693,  -801,   -49,  -17, -595],
  [  18.703,  -801,   -49,  -17, -595],
  [  18.713,  -801,   -49,  -18, -595],
  [  18.723,  -801,   -49,  -18, -595],
  [  18.734,  -801,   -49,  -18, -595],
  [  18.743,  -801,   -49,  -18, -595],
  [  18.753,  -801,   -49,  -18, -595],
  [  18.763,  -801,   -49,  -18, -595],
  [  18.774,  -801,   -49,  -18, -595],
  [  18.783,  -801,   -49,  -18, -596],
  [  18.793,  -801,   -50,  -18, -596],
  [  18.803,  -801,   -50,  -17, -596],
  [  18.813,  -801,   -50,  -17, -596],
  [  18.823,  -800,   -50,  -18, -596],
  [  18.833,  -800,   -51,  -18, -596],
  [  18.843,  -800,   -51,  -18, -596],
  [  18.853,  -800,   -51,  -19, -596],
  [  18.864,  -800,   -52,  -19, -596],
  [  18.873,  -800,   -52,  -19, -596],
  [  18.883,  -800,   -52,  -19, -596],
  [  18.893,  -800,   -52,  -19, -596],
  [  18.903,  -800,   -52,  -19, -596],
  [  18.913,  -800,   -52,  -18, -596],
  [  18.923,  -800,   -52,  -18, -596],
  [  18.933,  -800,   -52,  -18, -596],
  [  18.944,  -800,   -52,  -18, -596],
  [  18.954,  -800,   -53,  -19, -596],
  [  18.963,  -800,   -53,  -19, -596],
  [  18.973,  -800,   -53,  -19, -596],
  [  18.983,  -801,   -53,  -20, -595],
  [  18.993,  -801,   -52,  -21, -595],
  [  19.003,  -801,   -52,  -22, -595],
  [  19.013,  -801,   -53,  -23, -595],
  [  19.023,  -801,   -53,  -23, -595],
  [  19.033,  -801,   -53,  -23, -594],
  [  19.043,  -801,   -52,  -23, -594],
  [  19.053,  -801,   -52,  -23, -594],
  [  19.063,  -801,   -52,  -23, -594],
  [  19.074,  -801,   -52,  -23, -594],
  [  19.083,  -801,   -53,  -23, -594],
  [  19.093,  -801,   -53,  -23, -594],
  [  19.103,  -801,   -53,  -23, -594],
  [  19.112,  -801,   -52,  -23, -595],
  [  19.123,  -801,   -52,  -24, -595],
  [  19.133,  -801,   -52,  -24, -595],
  [  19.143,  -800,   -52,  -24, -596],
  [  19.153,  -800,   -52,  -25, -596],
  [  19.164,  -800,   -52,  -25, -596],
  [  19.173,  -800,   -52,  -24, -595],
  [  19.183,  -800,   -52,  -24, -595],
  [  19.193,  -800,   -52,  -25, -595],
  [  19.203,  -800,   -52,  -25, -596],
  [  19.213,  -800,   -52,  -25, -596],
  [  19.223,  -800,   -52,  -25, -596],
  [  19.233,  -800,   -52,  -25, -596],
  [  19.244,  -800,   -52,  -25, -596],
  [  19.254,  -800,   -52,  -25, -596],
  [  19.263,  -800,   -52,  -25, -596],
  [  19.273,  -800,   -52,  -26, -596],
  [  19.283,  -800,   -52,  -26, -596],
  [  19.293,  -800,   -52,  -26, -595],
  [  19.303,  -801,   -52,  -27, -595],
  [  19.313,  -801,   -52,  -27, -595],
  [  19.323,  -801,   -51,  -27, -595],
  [  19.334,  -801,   -51,  -26, -595],
  [  19.343,  -801,   -51,  -26, -595],
  [  19.353,  -801,   -51,  -26, -595],
  [  19.363,  -801,   -51,  -26, -595],
  [  19.374,  -801,   -51,  -26, -595],
  [  19.383,  -801,   -51,  -25, -595],
  [  19.393,  -801,   -51,  -25, -594],
  [  19.403,  -802,   -51,  -25, -594],
  [  19.414,  -802,   -50,  -24, -594],
  [  19.423,  -802,   -50,  -24, -594],
  [  19.433,  -802,   -51,  -24, -594],
  [  19.443,  -802,   -51,  -24, -594],
  [  19.453,  -802,   -51,  -24, -593],
  [  19.464,  -802,   -51,  -24, -593],
  [  19.474,  -802,   -51,  -24, -593],
  [  19.483,  -803,   -51,  -23, -593],
  [  19.493,  -803,   -50,  -23, -592],
  [  19.504,  -804,   -50,  -23, -591],
  [  19.513,  -804,   -50,  -23, -591],
  [  19.523,  -805,   -50,  -23, -590],
  [  19.533,  -805,   -50,  -23, -590],
  [  19.544,  -805,   -49,  -23, -589],
  [  19.554,  -806,   -49,  -23, -589],
  [  19.563,  -806,   -49,  -24, -588],
  [  19.573,  -806,   -49,  -24, -588],
  [  19.584,  -807,   -49,  -24, -587],
  [  19.594,  -807,   -49,  -24, -587],
  [  19.603,  -807,   -48,  -25, -587],
  [  19.613,  -807,   -48,  -25, -587],
  [  19.623,  -807,   -48,  -26, -587],
  [  19.634,  -807,   -48,  -26, -586],
  [  19.643,  -807,   -48,  -26, -586],
  [  19.653,  -808,   -47,  -26, -586],
  [  19.663,  -808,   -47,  -26, -586],
  [  19.674,  -808,   -47,  -26, -586],
  [  19.684,  -808,   -47,  -26, -586],
  [  19.693,  -808,   -47,  -26, -586],
  [  19.703,  -808,   -47,  -26, -586],
  [  19.714,  -808,   -47,  -26, -586],
  [  19.723,  -808,   -47,  -26, -586],
  [  19.733,  -808,   -46,  -26, -586],
  [  19.743,  -808,   -46,  -25, -586],
  [  19.753,  -808,   -45,  -25, -586],
  [  19.764,  -808,   -45,  -25, -586],
  [  19.774,  -808,   -45,  -25, -586],
  [  19.783,  -808,   -45,  -25, -586],
  [  19.793,  -808,   -45,  -25, -585],
  [  19.804,  -808,   -44,  -25, -585],
  [  19.813,  -809,   -44,  -25, -585]
  ]

/*!
 * jQuery lightweight plugin boilerplate
 * Original author: @ajpiano
 * Further changes, comments: @addyosmani
 * Licensed under the MIT license
 */

// the semi-colon before the function invocation is a safety
// net against concatenated scripts and/or other plugins
// that are not closed properly.

;(function ( $, THREE, Detector, window, document, undefined ) {

    // undefined is used here as the undefined global
    // variable in ECMAScript 3 and is mutable (i.e. it can
    // be changed by someone else). undefined isn't really
    // being passed in so we can ensure that its value is
    // truly undefined. In ES5, undefined can no longer be
    // modified.

    // window and document are passed through as local
    // variables rather than as globals, because this (slightly)
    // quickens the resolution process and can be more
    // efficiently minified (especially when both are
    // regularly referenced in your plugin).

    // Create the defaults once
    var pluginName = "Valiant360",
        plugin, // will hold reference to instantiated Plugin
        defaults = {
            crossOrigin: 'anonymous',
            clickAndDrag: false,
			keyboardControls: true,
            fov: 35,
            fovMin: 3,
            fovMax: 100,
            hideControls: false,
            lon: 0,
            lat: 0,
            loop: "loop",
            muted: true,
			volume: 1,
            debug: false,
            flatProjection: false,
            autoplay: true
        };

    // The actual plugin constructor
    function Plugin( element, options ) {
        this.element = element;

        // jQuery has an extend method that merges the
        // contents of two or more objects, storing the
        // result in the first object. The first object
        // is generally empty because we don't want to alter
        // the default options for future instances of the plugin
        this.options = $.extend( {}, defaults, options) ;

        this._defaults = defaults;
        this._name = pluginName;

        this.init();
    }

    Plugin.prototype = {

        init: function() {
            // Place initialization logic here
            // You already have access to the DOM element and
            // the options via the instance, e.g. this.element
            // and this.options
            // you can add more functions like the one below and
            // call them like so: this.yourOtherFunction(this.element, this.options).

            // instantiate some local variables we're going to need
            this._time = new Date().getTime();
            this._timeX =0;
            this._controls = {};
            this._id = this.generateUUID();

            this._requestAnimationId = ''; // used to cancel requestAnimationFrame on destroy
            this._isVideo = false;
            this._isPhoto = false;
            this._isFullscreen = false;
            this._mouseDown = false;
            this._dragStart = {};

            this._lat = this.options.lat;
            this._lon = this.options.lon;
            this._fov = this.options.fov;

            // save our original height and width for returning from fullscreen
            this._originalWidth = $(this.element).find('canvas').width();
            this._originalHeight = $(this.element).find('canvas').height();

            // add a class to our element so it inherits the appropriate styles
            $(this.element).addClass('Valiant360_default');

			// add tabindex attribute to enable the focus on the element (required for keyboard controls)
			if(this.options.keyboardControls && !$(this.element).attr("tabindex")){
				$(this.element).attr("tabindex", "1");
			}

            this.createMediaPlayer();
            this.createControls();

        },

        generateUUID: function(){
            var d = new Date().getTime();
            var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                var r = (d + Math.random()*16)%16 | 0;
                d = Math.floor(d/16);
                return (c==='x' ? r : (r&0x7|0x8)).toString(16);
            });
            return uuid;
        },

        createMediaPlayer: function() {

			// make a self reference we can pass to our callbacks
            var self = this;

            // create a local THREE.js scene
            this._scene = new THREE.Scene();

            // create ThreeJS camera
            this._camera = new THREE.PerspectiveCamera(this._fov, $(this.element).width() / $(this.element).height(), 0.1, 1000);
            this._camera.setLens(this._fov);

            // create ThreeJS renderer and append it to our object
            this._renderer = Detector.webgl? new THREE.WebGLRenderer(): new THREE.CanvasRenderer();
            this._renderer.setSize( $(this.element).width(), $(this.element).height() );
            this._renderer.autoClear = false;
            this._renderer.setClearColor( 0x333333, 1 );

            // append the rendering element to this div
            $(this.element).append(this._renderer.domElement);

			var createAnimation = function () {
                self._texture.generateMipmaps = false;
				self._texture.minFilter = THREE.LinearFilter;
				self._texture.magFilter = THREE.LinearFilter;
				self._texture.format = THREE.RGBFormat;

				// create ThreeJS mesh sphere onto which our texture will be drawn
				self._mesh = new THREE.Mesh( new THREE.SphereGeometry( 500, 80, 50 ), new THREE.MeshBasicMaterial( { map: self._texture } ) );
				self._mesh.scale.x = -1; // mirror the texture, since we're looking from the inside out
				self._scene.add(self._mesh);

				self.animate();
            };

            // figure out our texturing situation, based on what our source is
            if( $(this.element).attr('data-photo-src') ) {
                this._isPhoto = true;
                THREE.ImageUtils.crossOrigin = this.options.crossOrigin;
                this._texture = THREE.ImageUtils.loadTexture( $(this.element).attr('data-photo-src') );
				createAnimation();
            } else {
                this._isVideo = true;

				// create loading overlay
				var loadingHTML =  '<div class="loading"> \
										<div class="icon waiting-icon"></div> \
										<div class="icon error-icon"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i></div> \
									</div>';
                $(this.element).append(loadingHTML);
				this.showWaiting();

                // create off-dom video player
                this._video = document.createElement( 'video' );
                this._video.setAttribute('crossorigin', this.options.crossOrigin);
                this._video.style.display = 'none';
                $(this.element).append( this._video );
                this._video.loop = this.options.loop;
                this._video.muted = this.options.muted;
				this._video.volume = this.options.volume;

                // attach video player event listeners
                this._video.addEventListener("ended", function() {

                });

                // Progress Meter
                this._video.addEventListener("progress", function() {
                    var percent = null;
                    if (self._video && self._video.buffered && self._video.buffered.length > 0 && self._video.buffered.end && self._video.duration) {
                        percent = self._video.buffered.end(0) / self._video.duration;
                    }
                    // Some browsers (e.g., FF3.6 and Safari 5) cannot calculate target.bufferered.end()
                    // to be anything other than 0. If the byte count is available we use this instead.
                    // Browsers that support the else if do not seem to have the bufferedBytes value and
                    // should skip to there. Tested in Safari 5, Webkit head, FF3.6, Chrome 6, IE 7/8.
                    else if (self._video && self._video.bytesTotal !== undefined && self._video.bytesTotal > 0 && self._video.bufferedBytes !== undefined) {
                        percent = self._video.bufferedBytes / self._video.bytesTotal;
                    }

                    // Someday we can have a loading animation for videos
                    var cpct = Math.round(percent * 100);
                    if(cpct === 100) {
                        // do something now that we are done
                    } else {
                        // do something with this percentage info (cpct)
                    }
                });
				// Error listener
				this._video.addEventListener('error', function (event) {
                    console.error(self._video.error);
                    self.showError();
                });

				this._video.addEventListener("timeupdate", function() {
                    if (this.paused === false){
                        var percent = this.currentTime * 100 / this.duration;
                        $(self.element).find('.controlsWrapper > .valiant-progress-bar')[0].children[0].setAttribute("style", "width:" + percent + "%;");
                        $(self.element).find('.controlsWrapper > .valiant-progress-bar')[0].children[1].setAttribute("style", "width:" + (100 - percent) + "%;");
						//Update time label
						var durMin = Math.floor(this.duration / 60);
						var durSec = Math.floor(this.duration - (durMin * 60));
						var timeMin = Math.floor(this.currentTime / 60);
						var timeSec = Math.floor(this.currentTime - (timeMin * 60));
						var duration = durMin + ':' + (durSec < 10 ? '0' + durSec : durSec);
						var currentTime = timeMin + ':' + (timeSec < 10 ? '0' + timeSec : timeSec);
						$(self.element).find('.controls .timeLabel').html(currentTime+' / '+duration);
                    }
                });

				// IE 11 and previous not supports THREE.Texture([video]), we must create a canvas that draws the video and use that to create the Texture
				var isIE = navigator.appName == 'Microsoft Internet Explorer' || !!(navigator.userAgent.match(/Trident/) || navigator.userAgent.match(/rv 11/));
				if (isIE) {
                    this._videocanvas = document.createElement('canvas');
					this._texture = new THREE.Texture(this._videocanvas);
                    // set canvas size = video size when known
                    this._video.addEventListener('loadedmetadata', function () {
                        self._videocanvas.width = self._video.videoWidth;
                        self._videocanvas.height = self._video.videoHeight;
						createAnimation();
                    });
                }else{
					this._texture = new THREE.Texture( this._video );
				}

                //force browser caching of the video to solve rendering errors with big videos
                var xhr = new XMLHttpRequest();
                xhr.open('GET', $(this.element).attr('data-video-src'), true);
                xhr.responseType = 'blob';
                xhr.onload = function (e) {
                    if (this.status === 200) {
                        var vid = (window.webkitURL ? webkitURL : URL).createObjectURL(this.response);
                        //Video Play Listener, fires after video loads
                        $(self._video).bind("canplaythrough", function () {

                            if (self.options.autoplay === true) {
                                self.hideWaiting();
                                self.play();
                                self._videoReady = true;
                            }
                        });

						// set the video src and begin loading
                        self._video.src = vid;
                    }
                };
                xhr.onreadystatechange = function (oEvent) {
                    if (xhr.readyState === 4) {
                        if (xhr.status !== 200) {
                            console.error('Video error: status ' + xhr.status);
                            self.showError();
                        }
                    }
                };
                xhr.send();

				if(!isIE){
					createAnimation();
				}
            }
        },

        // creates div and buttons for onscreen video controls
        createControls: function() {

            var muteControl = this.options.muted ? 'fa-volume-off' : 'fa-volume-up';
            var playPauseControl = this.options.autoplay ? 'fa-pause' : 'fa-play';

            var controlsHTML = ' \
              <div class="controlsWrapper">\
                <div class="valiant-progress-bar">\
                    <div style="width: 0;"></div><div style="width: 100%;"></div>\
                </div>\
                <div class="controls"> \
                    <a href="#" class="playButton button fa '+ playPauseControl +'"></a> \
					<div class="audioControl">\
						<a href="#" class="muteButton button fa '+ muteControl +'"></a> \
						<div class="volumeControl">\
							<div class="volumeBar">\
								<div class="volumeProgress"></div>\
								<div class="volumeCursor"></div>\
							</div>\
						</div>\
					</div>\
					<span class="timeLabel"></span> \
                    <a href="#" class="fullscreenButton button fa fa-expand"></a> \
                </div> \
              </div>\
            ';

            $(this.element).append(controlsHTML, true);
			$(this.element).append('<div class="timeTooltip">00:00</div>', true);

            // hide controls if option is set
            if(this.options.hideControls) {
                $(this.element).find('.controls').hide();
            }

            // wire up controller events to dom elements
            this.attachControlEvents();
        },

        attachControlEvents: function() {

            // create a self var to pass to our controller functions
            var self = this;

            this.element.addEventListener( 'mousemove', this.onMouseMove.bind(this), false );
            this.element.addEventListener( 'touchmove', this.onMouseMove.bind(this), false );
            this.element.addEventListener( 'mousewheel', this.onMouseWheel.bind(this), false );
            this.element.addEventListener( 'DOMMouseScroll', this.onMouseWheel.bind(this), false );
            this.element.addEventListener( 'mousedown', this.onMouseDown.bind(this), false);
            this.element.addEventListener( 'touchstart', this.onMouseDown.bind(this), false);
            this.element.addEventListener( 'mouseup', this.onMouseUp.bind(this), false);
            this.element.addEventListener( 'touchend', this.onMouseUp.bind(this), false);

			if(this.options.keyboardControls){
				this.element.addEventListener('keydown',this.onKeyDown.bind(this), false);
                this.element.addEventListener('keyup',this.onKeyUp.bind(this), false);
				// Used custom press event because for the arrow buttons is not throws the 'keypress' event
                this.element.addEventListener('keyArrowPress',this.onKeyArrowPress.bind(this), false);
				this.element.addEventListener('click',function () {
                                $(self.element).focus();
                            },false);
			}

            $(self.element).find('.controlsWrapper > .valiant-progress-bar')[0].addEventListener("click", this.onProgressClick.bind(this), false);
			$(self.element).find('.controlsWrapper > .valiant-progress-bar')[0].addEventListener("mousemove", this.onProgressMouseMove.bind(this), false);
			$(self.element).find('.controlsWrapper > .valiant-progress-bar')[0].addEventListener("mouseout", this.onProgressMouseOut.bind(this), false);

            $(document).on('webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange',this.fullscreen.bind(this));

            $(window).resize(function() {
                self.resizeGL($(self.element).width(), $(self.element).height());
            });

            // Player Controls
            $(this.element).find('.playButton').click(function(e) {
                e.preventDefault();
                if($(this).hasClass('fa-pause')) {
                    $(this).removeClass('fa-pause').addClass('fa-play');
                    self.pause();
                } else {
                    $(this).removeClass('fa-play').addClass('fa-pause');
                    self.play();
                }
            });

            $(this.element).find(".fullscreenButton").click(function(e) {
                e.preventDefault();
                var elem = $(self.element)[0];
                if($(this).hasClass('fa-expand')) {
                    if (elem.requestFullscreen) {
                        elem.requestFullscreen();
                    } else if (elem.msRequestFullscreen) {
                        elem.msRequestFullscreen();
                    } else if (elem.mozRequestFullScreen) {
                        elem.mozRequestFullScreen();
                    } else if (elem.webkitRequestFullscreen) {
                        elem.webkitRequestFullscreen();
                    }
                } else {
                    if (elem.requestFullscreen) {
                        document.exitFullscreen();
                    } else if (elem.msRequestFullscreen) {
                        document.msExitFullscreen();
                    } else if (elem.mozRequestFullScreen) {
                        document.mozCancelFullScreen();
                    } else if (elem.webkitRequestFullscreen) {
                        document.webkitExitFullscreen();
                    }
                }
            });

            $(this.element).find(".muteButton").click(function(e) {
                e.preventDefault();
                if($(this).hasClass('fa-volume-off')) {
                    $(this).removeClass('fa-volume-off').addClass('fa-volume-up');
                    self._video.muted = false;
                } else {
                    $(this).removeClass('fa-volume-up').addClass('fa-volume-off');
                    self._video.muted = true;
                }
            });

			$(this.element).find('.controlsWrapper .volumeControl')
				.mousedown(this.onVolumeMouseDown.bind(this))
				.mouseup(this.onVolumeMouseUp.bind(this))
				.mouseleave(this.onVolumeMouseUp.bind(this))
				.mousemove(this.onVolumeMouseMove.bind(this));

			$(this._video).on('volumechange',this.onVolumeChange.bind(this));
        },

        onMouseMove: function(event) {
            this._onPointerDownPointerX = event.clientX;
            this._onPointerDownPointerY = -event.clientY;

            this.relativeX = event.pageX - $(this.element).find('canvas').offset().left;

            this._onPointerDownLon = this._lon;
            this._onPointerDownLat = this._lat;

            var x, y;

            if(this.options.clickAndDrag) {
                if(this._mouseDown) {
                    x = event.pageX - this._dragStart.x;
                    y = event.pageY - this._dragStart.y;
                    this._dragStart.x = event.pageX;
                    this._dragStart.y = event.pageY;
                    this._lon += x;
                    this._lat -= y;
                }
            } else {
                x = event.pageX - $(this.element).find('canvas').offset().left;
                y = event.pageY - $(this.element).find('canvas').offset().top;
                this._lon = ( x / $(this.element).find('canvas').width() ) * 430 - 225;
                this._lat = ( y / $(this.element).find('canvas').height() ) * -180 + 90;
            }
        },

        onMouseWheel: function(event) {

            var wheelSpeed = -0.01;

            // WebKit
            if ( event.wheelDeltaY ) {
                this._fov -= event.wheelDeltaY * wheelSpeed;
            // Opera / Explorer 9
            } else if ( event.wheelDelta ) {
                this._fov -= event.wheelDelta * wheelSpeed;
            // Firefox
            } else if ( event.detail ) {
                this._fov += event.detail * 1.0;
            }

            if(this._fov < this.options.fovMin) {
                this._fov = this.options.fovMin;
            } else if(this._fov > this.options.fovMax) {
                this._fov = this.options.fovMax;
            }

            this._camera.setLens(this._fov);
            event.preventDefault();
        },

        onMouseDown: function(event) {
            this._mouseDown = true;
            this._dragStart.x = event.pageX;
            this._dragStart.y = event.pageY;
        },

        onProgressClick: function(event) {
            if(this._isVideo && this._video.readyState === this._video.HAVE_ENOUGH_DATA) {
                var percent =  this.relativeX / $(this.element).find('canvas').width() * 100;
                $(this.element).find('.controlsWrapper > .valiant-progress-bar')[0].children[0].setAttribute("style", "width:" + percent + "%;");
                $(this.element).find('.controlsWrapper > .valiant-progress-bar')[0].children[1].setAttribute("style", "width:" + (100 - percent) + "%;");
                this._video.currentTime = this._video.duration * percent / 100;
            }
        },

		onProgressMouseMove: function(event){
			var percent =  this.relativeX / $(this.element).find('canvas').width() * 100;
			if(percent){
				var tooltip = $(this.element).find('.timeTooltip');
				var tooltipLeft = (this.relativeX - (tooltip.width()/2));
				tooltipLeft = tooltipLeft <0? 0:Math.min(tooltipLeft,$(this.element).find('canvas').width() - tooltip.outerWidth());
				tooltip.css({ left: tooltipLeft + 'px' });
				tooltip.show();
				var time = (percent / 100) * this._video.duration;
				var timeMin = Math.floor(time / 60);
				var timeSec = Math.floor(time - (timeMin * 60));
				tooltip.html(timeMin + ':' + (timeSec < 10 ? '0' + timeSec : timeSec));
			}
		},

		onProgressMouseOut: function (event) {
			$(this.element).find('.timeTooltip').hide();
		},

        onMouseUp: function(event) {
            this._mouseDown = false;
        },

		onKeyDown: function(event) {
		   var keyCode = event.keyCode;
		   if (keyCode >= 37 && keyCode <= 40) {
			   event.preventDefault();
			   this._keydown = true;
			   var pressEvent = document.createEvent('CustomEvent');
			   pressEvent.initCustomEvent("keyArrowPress",true,true,{'keyCode':keyCode});
			   this.element.dispatchEvent(pressEvent);
		   }
		},

		onKeyUp: function (event) {
		   var keyCode = event.keyCode;
		   if (keyCode >= 37 && keyCode <= 40) {
			   event.preventDefault();
			   this._keydown = false;
		   }
		},

		onKeyArrowPress: function (event) {
		   if (this._keydown) {
			   var keyCode = event.detail? event.detail.keyCode:null;
			   var offset = 3;
			   var pressDelay = 50;
			   var element = this.element;
			   event.preventDefault();
			   switch (keyCode) {
				   //Arrow left
				   case 37: this._lon -= offset;
					   break;
				   //Arrow right
				   case 39: this._lon += offset;
					   break;
				   //Arrow up
				   case 38: this._lat += offset;
					   break;
				   //Arrow down
				   case 40: this._lat -= offset;
					   break;
			   }
			   setTimeout(function () {
				   var pressEvent = document.createEvent('CustomEvent');
				   pressEvent.initCustomEvent("keyArrowPress",true,true,{'keyCode':keyCode});
				   element.dispatchEvent(pressEvent);
			   },
			   pressDelay);
		   }
	    },

		onVolumeMouseDown: function(event){
			event.preventDefault();
			this._volumeMouseDown = true;
			this.onVolumeMouseMove(event);
		},

		onVolumeMouseUp: function(event){
			event.preventDefault();
			this._volumeMouseDown = false;
		},

		onVolumeMouseMove: function(event){
			event.preventDefault();
			if(this._volumeMouseDown){
				var volumeControl = $(this.element).find('.controlsWrapper .volumeControl');
				var percent =  (this.relativeX - volumeControl.offset().left + (volumeControl.find('.volumeBar > .volumeCursor').width()/2)) / volumeControl.width() * 100;
				if(percent>=0 && percent<=100){
					this._video.volume = percent/100;
				}
			}
		},

		onVolumeChange: function(event){
			//change volume cursor value
			var percent = this._video.muted==true && !this._volumeMouseDown? 0:(this._video.volume * 100);
			$(this.element).find('.controlsWrapper .volumeControl > .volumeBar').css({width: percent+"%"});

			//change mute button
			var muteButton = $(this.element).find(".muteButton");
			if((percent>0 && muteButton.hasClass('fa-volume-off')) || (percent==0 && muteButton.hasClass('fa-volume-up'))){
				muteButton.click();
			}
		},

        animate: function() {
            // set our animate function to fire next time a frame is ready
            this._requestAnimationId = requestAnimationFrame( this.animate.bind(this) );

            if( this._isVideo ) {
                if ( this._video.readyState === this._video.HAVE_ENOUGH_DATA) {
					if(this._videocanvas) {
                        this._videocanvas.getContext('2d').drawImage(this._video, 0, 0, this._videocanvas.width, this._videocanvas.height);
                    }
                    if(typeof(this._texture) !== "undefined" ) {
                        var ct = new Date().getTime();
                        if(ct - this._time >= 30) {
                            this._texture.needsUpdate = true;
                            this._time = ct;
                        }
                    }
                }
            }

            this.render();
        },
        aaa: function(quaArr){

          var W=quaArr[1]/1000;
          var X=quaArr[2]/1000;
          var Y=quaArr[3]/1000;
          var Z=quaArr[4]/1000;
          sensor_quaternion = new THREE.Quaternion();
          sensor_quaternion.x = -X;
          sensor_quaternion.y = Z;
          sensor_quaternion.z = Y;
          sensor_quaternion.w = W;
          return sensor_quaternion;
        },
        render: function() {
          if (typeof this._video != 'undefined')
          {
              console.log(">",this._video.currentTime);
              var currentIdx = Math.floor(this._video.currentTime*200.0 );
              progress=this._video.currentTime/this._video.duration;
              /*this._lat=90*progress;
              this._lon=180*progress;*/
              this._camera.useQuaternions = true;
              sensor_quaternion_init=this.aaa(globalViewQua[0]);
              sensor_quaternion=this.aaa(globalViewQua[currentIdx]);

              var m = new THREE.Matrix4();
              m.makeRotationY ( -1.6);
              this._camera.quaternion.setFromRotationMatrix(m);
              this._camera.quaternion.multiply(sensor_quaternion);


/*
              this._camera.position.x = -X;
              this._camera.position.y = -Y;
              this._camera.position.z = -Z;*/
          }

          if(this._camera.useQuaternions!=true)
          {
            this._lat = Math.max( - 85, Math.min( 85, this._lat ) );
            this._phi = ( 90 - this._lat ) * Math.PI / 180;
            this._theta = this._lon * Math.PI / 180;

            var cx = 500 * Math.sin( this._phi ) * Math.cos( this._theta );
            var cy = 500 * Math.cos( this._phi );
            var cz = 500 * Math.sin( this._phi ) * Math.sin( this._theta );

            this._camera.lookAt(new THREE.Vector3(cx, cy, cz));

            // distortion
            if(this.options.flatProjection) {
                this._camera.position.x = 0;
                this._camera.position.y = 0;
                this._camera.position.z = 0;
            } else {
                this._camera.position.x = - cx;
                this._camera.position.y = - cy;
                this._camera.position.z = - cz;
            }
          }
          else
          {
              /*var rotation = new THREE.Euler().setFromQuaternion( this._camera.quaternion, 'XYZ' );

              var cx = 500 * Math.sin( this._phi ) * Math.cos( this._theta );
              var cy = 500 * Math.cos( this._phi );
              var cz = 500 * Math.sin( this._phi ) * Math.sin( this._theta );

              console.log(rotation);
              if(this.options.flatProjection) {
                  this._camera.position.x = 0;
                  this._camera.position.y = 0;
                  this._camera.position.z = 0;
              } else {
                  this._camera.position.x = - cx;
                  this._camera.position.y = - cy;
                  this._camera.position.z = - cz;
              }*/
          }

/*

            console.log(this._camera);
*/
            this._renderer.clear();
            this._renderer.render( this._scene, this._camera );
        },

        // Video specific functions, exposed to controller
        play: function() {
            //code to play media
            this._video.play();
        },

        pause: function() {
            //code to stop media
            this._video.pause();
        },

        loadVideo: function(videoFile) {
            this._video.src = videoFile;
        },
        unloadVideo: function() {
            // overkill unloading to avoid dreaded video 'pending' bug in Chrome. See https://code.google.com/p/chromium/issues/detail?id=234779
            this.pause();
            this._video.src = '';
            this._video.removeAttribute('src');
        },
        loadPhoto: function(photoFile) {
            this._texture = THREE.ImageUtils.loadTexture( photoFile );
        },

        fullscreen: function() {
            if($(this.element).find('a.fa-expand').length > 0) {
                this.resizeGL(screen.width, screen.height);

                $(this.element).addClass('fullscreen');
                $(this.element).find('a.fa-expand').removeClass('fa-expand').addClass('fa-compress');

                this._isFullscreen = true;
            } else {
                this.resizeGL(this._originalWidth, this._originalHeight);

                $(this.element).removeClass('fullscreen');
                $(this.element).find('a.fa-compress').removeClass('fa-compress').addClass('fa-expand');

                this._isFullscreen = false;
            }
        },

        resizeGL: function(w, h) {
            this._renderer.setSize(w, h);
            this._camera.aspect = w / h;
            this._camera.updateProjectionMatrix();
        },

		showWaiting: function () {
			var loading = $(this.element).find('.loading');
            loading.find('.waiting-icon').show();
            loading.find('.error-icon').hide();
            loading.show();
        },

        hideWaiting: function () {
            $(this.element).find('.loading').hide();
        },

        showError: function () {
			var loading = $(this.element).find('.loading');
            loading.find('.waiting-icon').hide();
            loading.find('.error-icon').show();
            loading.show();
        },

        destroy: function() {
            window.cancelAnimationFrame(this._requestAnimationId);
            this._requestAnimationId = '';
            this._texture.dispose();
            this._scene.remove(this._mesh);
            if(this._isVideo) {
                this.unloadVideo();
            }
            $(this._renderer.domElement).remove();
        }
    };

    $.fn[pluginName] = function ( options ) {
        // use pluginArguments instead of this.each arguments, otherwise Valiant360('loadVideo', 'path/to/video') path argument will be missing
        var pluginArguments = arguments;
        return this.each(function () {
            if(typeof options === 'object' || !options) {
                // A really lightweight plugin wrapper around the constructor,
                // preventing against multiple instantiations
                this.plugin = new Plugin(this, options);
                if (!$.data(this, "plugin_" + pluginName)) {
                    $.data(this, "plugin_" + pluginName, this.plugin);
                }
            } else if(this.plugin[options]) {
                // Allows plugin methods to be called - use pluginArguments instead of this.each arguments
                return this.plugin[options].apply(this.plugin, Array.prototype.slice.call(pluginArguments, 1))
            }
        });
    };

})( jQuery, THREE, Detector, window, document );
